(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{2104:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),r=a(2115),i=a(6874),l=a.n(i),n=a(5695);function d(){let[e,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[d,o]=(0,r.useState)(null),[c,m]=(0,r.useState)({origin:"",destination:"",airline:"",date:""});(0,n.useRouter)(),(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{i(!0);let e="/api/flights",a=new URLSearchParams;c.origin&&a.append("origin",c.origin),c.destination&&a.append("destination",c.destination),c.airline&&a.append("airline",c.airline),c.date&&a.append("date",c.date),a.toString()&&(e+="?".concat(a.toString()));let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch flights");let r=await t.json();s(r)}catch(e){o(e instanceof Error?e.message:"An error occurred")}finally{i(!1)}},u=e=>{let{name:s,value:a}=e.target;m(e=>({...e,[s]:a}))},x=e=>new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Browse Flights"}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Filter Flights"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h()},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"Origin"}),(0,t.jsx)("input",{type:"text",id:"origin",name:"origin",value:c.origin,onChange:u,className:"w-full p-2 border rounded-md",placeholder:"e.g. New York"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"destination",className:"block text-sm font-medium mb-1",children:"Destination"}),(0,t.jsx)("input",{type:"text",id:"destination",name:"destination",value:c.destination,onChange:u,className:"w-full p-2 border rounded-md",placeholder:"e.g. London"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"airline",className:"block text-sm font-medium mb-1",children:"Airline"}),(0,t.jsx)("input",{type:"text",id:"airline",name:"airline",value:c.airline,onChange:u,className:"w-full p-2 border rounded-md",placeholder:"e.g. Emirates"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium mb-1",children:"Date"}),(0,t.jsx)("input",{type:"date",id:"date",name:"date",value:c.date,onChange:u,className:"w-full p-2 border rounded-md"})]}),(0,t.jsx)("div",{className:"md:col-span-4 flex justify-end",children:(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Apply Filters"})})]})]}),a?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),(0,t.jsx)("p",{className:"mt-2",children:"Loading flights..."})]}):d?(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}):0===e.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-lg",children:"No flights found matching your criteria."})}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6",children:e.map(e=>(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row justify-between",children:[(0,t.jsxs)("div",{className:"mb-4 md:mb-0",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("span",{className:"font-bold text-lg mr-2",children:e.airline.name}),(0,t.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:e.flightNumber})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Departure"}),(0,t.jsx)("p",{className:"font-semibold",children:x(e.departureTime)}),(0,t.jsx)("p",{className:"text-lg font-bold",children:e.origin})]}),(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-full h-0.5 bg-gray-300 dark:bg-gray-600 relative",children:(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-blue-600"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Arrival"}),(0,t.jsx)("p",{className:"font-semibold",children:x(e.arrivalTime)}),(0,t.jsx)("p",{className:"text-lg font-bold",children:e.destination})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col justify-between items-end",children:[(0,t.jsx)("div",{className:"flex items-center mb-2",children:(0,t.jsxs)("span",{className:"text-sm mr-2",children:[e._count.ratings," ratings â€¢ ",e._count.reviews," reviews"]})}),(0,t.jsx)(l(),{href:"/flights/".concat(e.id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"})]})]})})},e.id))})]})}},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},6041:(e,s,a)=>{Promise.resolve().then(a.bind(a,2104))}},e=>{var s=s=>e(e.s=s);e.O(0,[874,441,684,358],()=>s(6041)),_N_E=e.O()}]);