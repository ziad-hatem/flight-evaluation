{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/ziadhatem/task/flight-evaluation/src/app/my-rates/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\ninterface Airline {\n  id: string;\n  name: string;\n  logo?: string;\n}\n\ninterface Flight {\n  id: string;\n  flightNumber: string;\n  origin: string;\n  destination: string;\n  departureTime: string;\n  arrivalTime: string;\n  airline: Airline;\n}\n\ninterface Rating {\n  id: string;\n  userId: string;\n  flightId: string;\n  checkIn: number;\n  boardingExp: number;\n  cabinCrew: number;\n  seatComfort: number;\n  foodQuality: number;\n  entertainment: number;\n  flightPerf: number;\n  valueForMoney: number;\n  overallRating: number;\n  createdAt: string;\n  updatedAt: string;\n  flight: Flight;\n}\n\nexport default function MyRatingsPage() {\n  const router = useRouter();\n  const [ratings, setRatings] = useState<Rating[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [session, setSession] = useState<{ user?: { id: string } } | null>(null);\n\n  useEffect(() => {\n    // Check if user is logged in\n    const checkSession = async () => {\n      try {\n        const res = await fetch('/api/auth/session');\n        const sessionData = await res.json();\n        setSession(sessionData);\n        \n        if (sessionData?.user?.id) {\n          fetchUserRatings(sessionData.user.id);\n        } else {\n          // Not authenticated, redirect to login\n          router.push('/login?callbackUrl=/my-rates');\n        }\n      } catch (err) {\n        console.error('Failed to fetch session:', err);\n        setError('Failed to authenticate. Please try again.');\n        setLoading(false);\n      }\n    };\n\n    checkSession();\n  }, [router]);\n\n  const fetchUserRatings = async (userId: string) => {\n    try {\n      setLoading(true);\n      const response = await fetch(`/api/ratings?userId=${userId}`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to fetch ratings');\n      }\n      \n      const data = await response.json();\n      setRatings(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n      console.error('Ratings fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  const getRatingColor = (rating: number) => {\n    if (rating >= 4) return 'text-green-600';\n    if (rating >= 3) return 'text-yellow-600';\n    return 'text-red-600';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8 text-center\">\n        <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent\"></div>\n        <p className=\"mt-2\">Loading your ratings...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n          <span className=\"block sm:inline\">{error}</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold mb-6\">My Flight Ratings</h1>\n      \n      {ratings.length === 0 ? (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center\">\n          <p className=\"text-gray-600 dark:text-gray-400 mb-4\">You haven't rated any flights yet.</p>\n          <Link \n            href=\"/flights\" \n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Browse Flights to Rate\n          </Link>\n        </div>\n      ) : (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6\">\n          <h2 className=\"text-xl font-semibold mb-4\">Your Ratings ({ratings.length})</h2>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                <tr>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Flight</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Airline</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Route</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Rating</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Date</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">Actions</th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                {ratings.map((rating) => (\n                  <tr key={rating.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium\">\n                        {rating.flight.flightNumber}\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm\">{rating.flight.airline.name}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm\">{rating.flight.origin} → {rating.flight.destination}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className={`text-sm font-bold ${getRatingColor(rating.overallRating)}`}>\n                        {rating.overallRating.toFixed(1)}/5\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-500 dark:text-gray-400\">{formatDate(rating.createdAt)}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                      <Link \n                        href={`/flights/${rating.flightId}`} \n                        className=\"text-blue-600 hover:underline\"\n                      >\n                        View Flight\n                      </Link>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n      \n      <div className=\"mt-8\">\n        <Link href=\"/profile\" className=\"text-blue-600 hover:underline\">\n          ← Back to Profile\n        </Link>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 406, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///Users/ziadhatem/task/flight-evaluation/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}