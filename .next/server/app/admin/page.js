(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ziadhatem/task/flight-evaluation/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ziadhatem/task/flight-evaluation/src/app/admin/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11146:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=t(65239),i=t(48088),s=t(88170),l=t.n(s),d=t(30893),n={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(r,n);let o={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1132)),"/Users/ziadhatem/task/flight-evaluation/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/ziadhatem/task/flight-evaluation/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/ziadhatem/task/flight-evaluation/src/app/admin/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},12454:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var a=t(60687),i=t(43210),s=t(82136),l=t(16189);let d=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function n(){(0,l.useRouter)();let{data:e,status:r}=(0,s.useSession)(),[t,n]=(0,i.useState)("airlines"),[o,c]=(0,i.useState)({name:"",logo:"",description:""}),[m,u]=(0,i.useState)({flightNumber:"",origin:"",destination:"",departureTime:"",arrivalTime:"",airlineId:""}),[x,p]=(0,i.useState)([]),[h,g]=(0,i.useState)([]),[b,y]=(0,i.useState)(!1),[f,v]=(0,i.useState)(null),[j,N]=(0,i.useState)(null),[k,w]=(0,i.useState)(!1),[T,C]=(0,i.useState)(null),[A,F]=(0,i.useState)(null),S=async()=>{try{let e=await fetch("/api/airlines",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch airlines");let r=await e.json();p(r)}catch(e){v("Failed to load airlines"),console.error(e)}},P=async()=>{try{let e=await fetch("/api/flights",{credentials:"include"});if(!e.ok)throw Error("Failed to fetch flights");let r=await e.json();g(r)}catch(e){v("Failed to load flights"),console.error(e)}},E=async e=>{e.preventDefault(),y(!0),v(null),N(null);try{let e="/api/airlines",r="POST",t="Airline created successfully";k&&T&&(e=`/api/airlines/${T}`,r="PUT",t="Airline updated successfully");let a=await fetch(e,{method:r,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)}),i=await a.json();if(!a.ok)throw Error(i.error||"Failed to process airline");N(t),c({name:"",logo:"",description:""}),w(!1),C(null),S()}catch(e){v(e instanceof Error?e.message:"Failed to process airline")}finally{y(!1)}},D=async e=>{if(e.preventDefault(),y(!0),v(null),N(null),!m.flightNumber||!m.origin||!m.destination||!m.departureTime||!m.arrivalTime||!m.airlineId){v("All fields are required"),y(!1);return}let r=new Date(m.departureTime);if(new Date(m.arrivalTime)<=r){v("Arrival time must be after departure time"),y(!1);return}try{let e="/api/flights",r="POST",t="Flight created successfully";k&&T&&(e=`/api/flights/${T}`,r="PUT",t="Flight updated successfully");let a=await fetch(e,{method:r,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)}),i=await a.json();if(!a.ok)throw Error(i.error||"Failed to process flight");N(t),u({flightNumber:"",origin:"",destination:"",departureTime:"",arrivalTime:"",airlineId:""}),w(!1),C(null),P()}catch(e){v(e instanceof Error?e.message:"Failed to process flight")}finally{y(!1)}};return b?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent"}),(0,a.jsx)("p",{className:"mt-2",children:"Loading..."})]}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Admin Dashboard"}),(0,a.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>n("airlines"),className:`px-4 py-2 rounded-lg ${"airlines"===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:"Airlines"}),(0,a.jsx)("button",{onClick:()=>n("flights"),className:`px-4 py-2 rounded-lg ${"flights"===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:"Flights"})]}),f&&(0,a.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:f})}),j&&(0,a.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:(0,a.jsx)("span",{className:"block sm:inline",children:j})}),"airlines"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:k?"Edit Airline":"Add New Airline"}),(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium mb-1",children:"Airline Name"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:e=>c(r=>({...r,name:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium mb-1",children:"Logo URL"}),(0,a.jsx)("input",{type:"url",id:"logo",name:"logo",value:o.logo,onChange:e=>c(r=>({...r,logo:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:e=>c(r=>({...r,description:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",rows:3})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",disabled:b,children:k?"Update Airline":"Add Airline"}),k&&(0,a.jsx)("button",{type:"button",onClick:()=>{w(!1),C(null),c({name:"",logo:"",description:""})},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Airlines List"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Logo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.logo&&(0,a.jsx)("img",{src:e.logo,alt:e.name,className:"h-8 w-8 object-contain"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.description}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{w(!0),C(e.id),c({name:e.name,logo:e.logo||"",description:e.description||""}),n("airlines"),window.scrollTo({top:0,behavior:"smooth"})},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>F({id:e.id,type:"airline"}),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id))})]})})]})]}),"flights"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:k?"Edit Flight":"Add New Flight"}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"flightNumber",className:"block text-sm font-medium mb-1",children:"Flight Number"}),(0,a.jsx)("input",{type:"text",id:"flightNumber",name:"flightNumber",value:m.flightNumber,onChange:e=>u(r=>({...r,flightNumber:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"airlineId",className:"block text-sm font-medium mb-1",children:"Airline"}),(0,a.jsxs)("select",{id:"airlineId",name:"airlineId",value:m.airlineId,onChange:e=>u(r=>({...r,airlineId:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select an airline"}),x.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"origin",className:"block text-sm font-medium mb-1",children:"Origin"}),(0,a.jsx)("input",{type:"text",id:"origin",name:"origin",value:m.origin,onChange:e=>u(r=>({...r,origin:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"destination",className:"block text-sm font-medium mb-1",children:"Destination"}),(0,a.jsx)("input",{type:"text",id:"destination",name:"destination",value:m.destination,onChange:e=>u(r=>({...r,destination:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"departureTime",className:"block text-sm font-medium mb-1",children:"Departure Time"}),(0,a.jsx)("input",{type:"datetime-local",id:"departureTime",name:"departureTime",value:m.departureTime,onChange:e=>u(r=>({...r,departureTime:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"arrivalTime",className:"block text-sm font-medium mb-1",children:"Arrival Time"}),(0,a.jsx)("input",{type:"datetime-local",id:"arrivalTime",name:"arrivalTime",value:m.arrivalTime,onChange:e=>u(r=>({...r,arrivalTime:e.target.value})),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",disabled:b,children:k?"Update Flight":"Add Flight"}),k&&(0,a.jsx)("button",{type:"button",onClick:()=>{w(!1),C(null),u({flightNumber:"",origin:"",destination:"",departureTime:"",arrivalTime:"",airlineId:""})},className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Flights List"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Flight Number"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Airline"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Origin"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Destination"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Departure"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Arrival"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.flightNumber}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.airline.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.origin}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.destination}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:d(e.departureTime)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:d(e.arrivalTime)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{w(!0),C(e.id),u({flightNumber:e.flightNumber,origin:e.origin,destination:e.destination,departureTime:new Date(e.departureTime).toISOString().slice(0,16),arrivalTime:new Date(e.arrivalTime).toISOString().slice(0,16),airlineId:e.airline.id}),n("flights"),window.scrollTo({top:0,behavior:"smooth"})},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>F({id:e.id,type:"flight"}),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})})]},e.id))})]})})]})]}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Confirm Delete"}),(0,a.jsxs)("p",{className:"mb-6",children:["Are you sure you want to delete this ",A.type,"? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>F(null),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:async()=>{y(!0);try{let e=await fetch(`/api/${A.type}s/${A.id}`,{method:"DELETE"});if(!e.ok){let r=await e.json();throw Error(r.error||`Failed to delete ${A.type}`)}N(`${A.type.charAt(0).toUpperCase()+A.type.slice(1)} deleted successfully`),"airline"===A.type?S():P()}catch(e){v(e instanceof Error?e.message:`Failed to delete ${A.type}`)}finally{y(!1),F(null)}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}},16189:(e,r,t)=>{"use strict";var a=t(65773);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27999:(e,r,t)=>{Promise.resolve().then(t.bind(t,12454))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79551:e=>{"use strict";e.exports=require("url")},97735:(e,r,t)=>{Promise.resolve().then(t.bind(t,1132))}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[243,427,658,383],()=>t(11146));module.exports=a})();